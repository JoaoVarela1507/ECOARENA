<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/Front/styles/resgatar-premios.css">
    <title>ECOARENA - Resgatar Prêmios</title>
</head>
<body>
    <div id="login">
        <form class="card" id="food-form">
            <div class="logo">
                <img src="/Front/img/logo-ecoarena.png" alt="Logo ECOARENA">
            </div>
            <div class="card-header">
                <h2>PRÊMIOS:</h2>
            </div>
            <div class="card-content">
                <!-- Seção para Novato da Torcida -->
                <h3 class="nivel-title">Novato da Torcida:</h3>
                <button class="botao-premio" id="novato-premio">1 Cerveja</button>
                <button class="botao-premio" id="novato-premio">1 Refrigerante</button>
                <button class="botao-premio" id="novato-premio">1 Salgadinho</button>

                <!-- Seção para Amante do Futebol -->
                <h3 class="nivel-title">Amante do Futebol:</h3>
                <button class="botao-premio" id="amante-premio">2 Cervejas</button>
                <button class="botao-premio" id="amante-premio">1 Pizza</button>
                <button class="botao-premio" id="amante-premio">1 Hambúrguer</button>
                <button class="botao-premio" id="amante-premio">1 Churros</button>
                <button class="botao-premio" id="amante-premio">1 Cachorro Quente</button>

                <!-- Seção para Lenda Local -->
                <h3 class="nivel-title">Lenda Local:</h3>
                <button class="botao-premio" id="lenda-premio">3 Cervejas</button>
                <button class="botao-premio" id="lenda-premio">1 Pizza + Refrigerante</button>
                <button class="botao-premio" id="lenda-premio">1 Hambúrguer + Refrigerante</button>
                <button class="botao-premio" id="lenda-premio">1 Churros + Refrigerante</button>
                <button class="botao-premio" id="lenda-premio">1 Cachorro Quente + Refrigerante</button>

                <!-- Seção para Ídolo Nacional -->
                <h3 class="nivel-title">Ídolo Nacional:</h3>
                <button class="botao-premio" id="idolo-premio">2 Ingressos para qualquer jogo</button>
            </div>
            <div class="logout-container">
                <a href="/Front/pags/verificar-pontos.html" class="btn btn-logout">VOLTAR</a>
            </div>
        </form>
    </div>

    <!-- JavaScript embutido -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const premios = document.querySelectorAll(".botao-premio");

            premios.forEach((botao) => {
                botao.addEventListener("click", function (event) {
                    event.preventDefault();

                    let pontos = 0;
                    let nivel = event.target.id;

                    // Atribui os pontos baseados no nível
                    switch (nivel) {
                        case "novato-premio":
                            pontos = 200;
                            break;
                        case "amante-premio":
                            pontos = 500;
                            break;
                        case "lenda-premio":
                            pontos = 800;
                            break;
                        case "idolo-premio":
                            pontos = 1000;
                            break;
                        default:
                            pontos = 0;
                            break;
                    }

                    // Subtrai os pontos do localStorage
                    let pontosAtuais = localStorage.getItem("pontos") || 1000; // Valor inicial de 1000
                    pontosAtuais = parseInt(pontosAtuais);
                    if (pontosAtuais >= pontos) {
                        pontosAtuais -= pontos;
                        localStorage.setItem("pontos", pontosAtuais);

                        // Gera um cupom aleatório
                        const cupom = Math.random().toString(36).substring(2, 10).toUpperCase();

                        // Mostra o alert com os pontos e o cupom
                        alert(`☑ Você gastou ${pontos} pontos. Seu cupom é: ${cupom} ☑`);

                        // Redireciona para outra tela
                        window.location.href = "/Front/pags/verificar-pontos.html";
                    } else {
                        alert("☒ Pontos insuficientes para resgatar este prêmio. ☒");
                    }
                });
            });
        });
    </script>
</body>
</html>
